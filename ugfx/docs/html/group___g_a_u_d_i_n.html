<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>uGFX: GAUDIN</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">uGFX
   &#160;<span id="projectnumber">2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___g_a_u_d_i_n.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GAUDIN</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for GAUDIN:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___g_a_u_d_i_n.png" border="0" alt="" usemap="#group______g__a__u__d__i__n"/>
<map name="group______g__a__u__d__i__n" id="group______g__a__u__d__i__n">
<area shape="rect" id="node2" href="group___driver.html" title="Driver" alt="" coords="117,5,168,29"/></map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Module to read audio inputs (under development) </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_g_event_audio_in__t.html">GEventAudioIn_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Audio Input event structure.  <a href="struct_g_event_audio_in__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___driver"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___driver.html">Driver</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae7ba631ac1049a14fc3437bb0b11f011"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_o_s.html#ga449976458a084f880dc8e3d29e7eb6f5">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_u_d_i_n.html#gae7ba631ac1049a14fc3437bb0b11f011">gaudinInit</a> (uint16_t channel, uint32_t frequency, audin_sample_t *buffer, <a class="el" href="group___g_o_s.html#gacf18a0d6c4b39d531e021702e9a77984">size_t</a> bufcount, <a class="el" href="group___g_o_s.html#gacf18a0d6c4b39d531e021702e9a77984">size_t</a> samplesPerEvent)</td></tr>
<tr class="memdesc:gae7ba631ac1049a14fc3437bb0b11f011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise (but not start) the Audio Input Subsystem.  <a href="#gae7ba631ac1049a14fc3437bb0b11f011">More...</a><br/></td></tr>
<tr class="separator:gae7ba631ac1049a14fc3437bb0b11f011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d797998f7865045e78a9c0176c9dae0"><td class="memItemLeft" align="right" valign="top">GSourceHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_u_d_i_n.html#ga5d797998f7865045e78a9c0176c9dae0">gaudinGetSource</a> (void)</td></tr>
<tr class="memdesc:ga5d797998f7865045e78a9c0176c9dae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on sending results to the GEVENT sub-system.  <a href="#ga5d797998f7865045e78a9c0176c9dae0">More...</a><br/></td></tr>
<tr class="separator:ga5d797998f7865045e78a9c0176c9dae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e9501b3ae1a718ac3df6ac40ef54386"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_u_d_i_n.html#ga1e9501b3ae1a718ac3df6ac40ef54386">gaudinSetBSem</a> (<a class="el" href="structgfx_sem.html">gfxSem</a> *pbsem, <a class="el" href="group___g_a_u_d_i_n.html#gaf0e872b7de48e5ade6230efc098ef20b">GEventAudioIn</a> *pEvent)</td></tr>
<tr class="memdesc:ga1e9501b3ae1a718ac3df6ac40ef54386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow retrieving of results from the audio input using a Binary Semaphore and a static event buffer.  <a href="#ga1e9501b3ae1a718ac3df6ac40ef54386">More...</a><br/></td></tr>
<tr class="separator:ga1e9501b3ae1a718ac3df6ac40ef54386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e557344d4a42feefa25d959bf9e8aca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_u_d_i_n.html#ga0e557344d4a42feefa25d959bf9e8aca">gaudinStart</a> (void)</td></tr>
<tr class="memdesc:ga0e557344d4a42feefa25d959bf9e8aca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the audio input conversions.  <a href="#ga0e557344d4a42feefa25d959bf9e8aca">More...</a><br/></td></tr>
<tr class="separator:ga0e557344d4a42feefa25d959bf9e8aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d7a2f9beb7b33fd2544b6cfbe29f20b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_u_d_i_n.html#ga8d7a2f9beb7b33fd2544b6cfbe29f20b">gaudinStop</a> (void)</td></tr>
<tr class="memdesc:ga8d7a2f9beb7b33fd2544b6cfbe29f20b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the audio input conversions.  <a href="#ga8d7a2f9beb7b33fd2544b6cfbe29f20b">More...</a><br/></td></tr>
<tr class="separator:ga8d7a2f9beb7b33fd2544b6cfbe29f20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0e872b7de48e5ade6230efc098ef20b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_g_event_audio_in__t.html">GEventAudioIn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_u_d_i_n.html#gaf0e872b7de48e5ade6230efc098ef20b">GEventAudioIn</a></td></tr>
<tr class="memdesc:gaf0e872b7de48e5ade6230efc098ef20b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Audio Input event structure.  <a href="#gaf0e872b7de48e5ade6230efc098ef20b">More...</a><br/></td></tr>
<tr class="separator:gaf0e872b7de48e5ade6230efc098ef20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae7ba631ac1049a14fc3437bb0b11f011"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_o_s.html#ga449976458a084f880dc8e3d29e7eb6f5">bool_t</a> gaudinInit </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">audin_sample_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_o_s.html#gacf18a0d6c4b39d531e021702e9a77984">size_t</a>&#160;</td>
          <td class="paramname"><em>bufcount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_o_s.html#gacf18a0d6c4b39d531e021702e9a77984">size_t</a>&#160;</td>
          <td class="paramname"><em>samplesPerEvent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise (but not start) the Audio Input Subsystem. </p>
<p>Returns FALSE for an invalid channel or other invalid parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">channel</td><td>The channel to convert. Can be set from 0 to GAUDIN_NUM_CHANNELS - 1. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">frequency</td><td>The sample frequency </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>The static buffer to put the samples into. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bufcount</td><td>The total number of conversions that will fit in the buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">samplesPerEvent</td><td>The number of conversions to do before returning an event.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Only one channel is active at a time. If an audio input is running it will be stopped. The Event subsystem is disconnected from the audio subsystem and any binary semaphore event is forgotten. </dd>
<dd>
Some channels may be stereo channels which return twice as much sample data with the left and right channel data interleaved. Other channels may be mono channels. Where stereo channels exist it would be common for the low level driver to also offer the left and right channels separately. </dd>
<dd>
Due to a bug in Chibi-OS countPerEvent must be even if using the GADC low level audio driver. If bufcount is not evenly divisable by countPerEvent, the remainder must also be even. This requirement may not apply to other GAUDIN drivers. </dd>
<dd>
The number of samples for stereo devices will be double the number of conversions. Make sure you allocate your buffers large enough. Each channel is then interleaved into the provided buffer. Note 'bufcount' and 'countPerEvent' parameters describe the number of conversions not the number of samples. </dd>
<dd>
The buffer is circular. When the end of the buffer is reached it will start putting data into the beginning of the buffer again. </dd>
<dd>
The event listener must process the event (and the data in it) before the next event occurs. If not, the following event will be lost. </dd>
<dd>
If bufcount is evenly divisable by countPerEvent, then every event will return countPerEvent conversions. If bufcount is not evenly divisable, it will return a block of samples containing less than countPerEvent samples when it reaches the end of the buffer.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>FALSE if invalid channel or parameter</dd></dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5d797998f7865045e78a9c0176c9dae0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSourceHandle gaudinGetSource </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn on sending results to the GEVENT sub-system. </p>
<p>Returns a GSourceHandle to listen for GEVENT_AUDIO_IN events.</p>
<dl class="section note"><dt>Note</dt><dd>The audio input will not use the GEVENT system unless this is called first. This saves processing time if the application does not want to use the GEVENT sub-system for audio input. Once turned on it can only be turned off by calling <code><a class="el" href="group___g_a_d_c.html#ga78977f898a9d53f739c9bf9a1867fd0b" title="Initialise the high speed ADC. ">gadcHighSpeedInit()</a></code> again. </dd>
<dd>
The audio input is capable of signalling via this method and a binary semaphore at the same time.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The GSourceHandle</dd></dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1e9501b3ae1a718ac3df6ac40ef54386"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gaudinSetBSem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgfx_sem.html">gfxSem</a> *&#160;</td>
          <td class="paramname"><em>pbsem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_u_d_i_n.html#gaf0e872b7de48e5ade6230efc098ef20b">GEventAudioIn</a> *&#160;</td>
          <td class="paramname"><em>pEvent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow retrieving of results from the audio input using a Binary Semaphore and a static event buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pbsem</td><td>The semaphore is signaled when data is available. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pEvent</td><td>The static event buffer to place the result information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Passing a NULL for pbsem or pEvent will turn off signalling via this method. </dd>
<dd>
The audio input is capable of signalling via this method and the GEVENT sub-system at the same time.</dd></dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0e557344d4a42feefa25d959bf9e8aca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gaudinStart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the audio input conversions. </p>
<dl class="section pre"><dt>Precondition</dt><dd>It must have been initialised first with <code><a class="el" href="group___g_a_u_d_i_n.html#gae7ba631ac1049a14fc3437bb0b11f011" title="Initialise (but not start) the Audio Input Subsystem. ">gaudinInit()</a></code> </dd></dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8d7a2f9beb7b33fd2544b6cfbe29f20b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gaudinStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the audio input conversions. </p>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaf0e872b7de48e5ade6230efc098ef20b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_g_event_audio_in__t.html">GEventAudioIn_t</a>  <a class="el" href="group___g_a_u_d_i_n.html#gaf0e872b7de48e5ade6230efc098ef20b">GEventAudioIn</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Audio Input event structure. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Nov 10 2013 23:06:13 for uGFX by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
